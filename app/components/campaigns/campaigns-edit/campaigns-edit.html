<top-bar
  logo-href="/cms/app/campaigns/"
  save-function="saveModel"
  save-disable-when="model.$dirty().length === 0 && !isNew">
</top-bar>

<div class="container col-xs-offset-2 col-xs-8">
  <h3>Edit Campaign</h3>
  <div class="row well">
    <div class="row">
      <div class="form-group col-md-4">
        <label for="campaignLabel">Campaign Label (Internal Use Only)</label>
        <input id="campaignLabel" type="text" name="campaign_label" ng-model="model.campaign_label" class="form-control" placeholder="e.g. O-183794983">
      </div>
      <div class="form-group col-md-4">
        <label for="campaignSponsorName">Sponsor Name (Appears On Website)</label>
        <input id="campaignSponsorName" type="text" name="sponsor_name" ng-model="model.sponsor_name" class="form-control">
      </div>
    </div>
    <div class="row">
      <div class="form-group col-md-6">
        <label for="campaignSponsorUrl">Sponsor Click Through URL</label>
        <input id="campaignSponsorUrl" type="text" name="sponsor_url" ng-model="model.sponsor_url" class="form-control">
      </div>
      <div class="form-group col-md-4">
        <label for="impressionGoal">Set Impression Goal</label>
        <input
            id="impressionGoal"
            type="text"
            ng-model="model.impression_goal"
            class="form-control"
            placeholder="e.g. 20,000,000">
      </div>
    </div>
    <div class="row">
      <div class="form-group col-md-4">
        <label for="campaignStartDate">Campaign Start Date</label>
        <div class="input-group">
          <input
              id="campaignStartDate"
              type="text"
              name="start_date"
              value="{{model.start_date | momentFormatter : 'MM/DD/YY h:mm:ss a' }}"
              class="form-control"
              readonly>
          <span class="input-group-btn">
            <button
                class="btn btn-info"
                datetime-selection-modal-opener
                ng-model="model.start_date"
                modal-title="Campaign Start Date">
              <i class="glyphicon glyphicon-calendar"></i>
            </button>
            <button
                class="btn btn-danger"
                ng-click="model.start_date = null;">
              <i class="glyphicon glyphicon-remove"></i>
            </button>
          </span>
        </div>
      </div>
      <div class="form-group col-md-4">
        <label for="campaignEndDate">Campaign End Date</label>
        <div class="input-group">
          <input
              id="campaignEndDate"
              type="text"
              name="end_date"
              value="{{model.end_date | momentFormatter : 'MM/DD/YY h:mm:ss a' }}"
              class="form-control"
              readonly>
          <span class="input-group-btn">
            <button
                class="btn btn-info"
                datetime-selection-modal-opener
                ng-model="model.end_date"
                modal-title="Campaign End Date">
              <i class="glyphicon glyphicon-calendar"></i>
            </button>
            <button class="btn btn-danger" ng-click="model.end_date = null;">
              <i class="glyphicon glyphicon-remove"></i>
            </button>
          </span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-md-12">
        <label for="campaignSponsorUrl">Sponsor Logo</label>
        <bettyeditable
            image="model.sponsor_logo"
            ratio="16x9"
            placeholder-text="Optional Sponsor Logo"
            add-styles="fa fa-picture-o">
        </bettyeditable>
      </div>
    </div>

    <!--TODO(mparent 2015-03-18): Add "Total Impressions Served" field once supported-->
  </div>

  <div class="row well">
    <h5>Sponsor Pixels</h5>
    <div
        class="row col-md-8"
        ng-repeat="pixel in model.pixels">
      <campaigns-edit-sponsor-pixel model="pixel"></campaigns-edit-sponsor-pixel>
      <button ng-click="deletePixel(pixel);">Delete</button>
    </div>
    <div class="row col-md-12">
      <button ng-click="addPixel();">Add Another Pixel</button>
    </div>
  </div>
</div>
